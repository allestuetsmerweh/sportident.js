!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=8)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.proto={STX:2,ETX:3,ACK:6,NAK:21,DLE:16,WAKEUP:255,basicCmd:{SET_CARDNO:48,GET_SI5:49,SI5_WRITE:67,SI5_DET:70,TRANS_REC:83,TRANS_TIME:84,GET_SI6:97,SI6_DET:102,SET_MS:112,GET_MS:113,SET_SYS_VAL:114,GET_SYS_VAL:115,GET_BDATA:116,ERASE_BDATA:117,SET_TIME:118,GET_TIME:119,OFF:120,GET_BDATA2:122,SET_BAUD:126},basicCmdLookup:function(){return r._basicCmdLookup?r._basicCmdLookup:(r._basicCmdLookup={},Object.keys(r.basicCmd).map(function(e){r._basicCmdLookup[r.basicCmd[e]]=e}),r._basicCmdLookup)},cmd:{GET_BACKUP:129,SET_SYS_VAL:130,GET_SYS_VAL:131,SRR_WRITE:162,SRR_READ:163,SRR_QUERY:166,SRR_PING:167,SRR_ADHOC:168,GET_SI5:177,TRANS_REC:211,CLEAR_CARD:224,GET_SI6:225,SET_SI6:226,SET_SI6_SPECIAL:228,SI5_DET:229,SI6_DET:230,SI_REM:231,SI8_DET:232,SET_SI8:234,GET_SI8:239,SET_MS:240,GET_MS:241,ERASE_BDATA:245,SET_TIME:246,GET_TIME:247,OFF:248,SIGNAL:249,SET_BAUD:254},cmdLookup:function(){return r._cmdLookup?r._cmdLookup:(r._cmdLookup={},Object.keys(r.cmd).map(function(e){r._cmdLookup[r.cmd[e]]=e}),r._cmdLookup)},P_MS_DIRECT:77,P_MS_INDIRECT:83,P_SI6_CB:8,sysDataOffset:{OLD_SERIAL:0,OLD_CPU_ID:2,SERIAL_NO:0,FIRMWARE:5,BUILD_DATE:8,MODEL_ID:11,MEM_SIZE:13,REFRESH_RATE:16,POWER_MODE:17,BAT_DATE:21,BAT_CAP:25,BACKUP_PTR:28,SI6_CB:51,BAT_STATE:52,MEM_OVERFLOW:61,INTERVAL:72,WTF:74,PROGRAM:112,MODE:113,STATION_CODE:114,PROTO:116,LAST_WRITE_DATE:117,LAST_WRITE_TIME:120,SLEEP_TIME:123,WORKING_TIME:126},M_CONTROL:2,M_START:3,M_FINISH:4,M_READ_SICARDS:5,M_CLEAR:7,M_CHECK:10,M_PRINTOUT:11,D_SUNDAY:0,D_MONDAY:1,D_TUESDAY:2,D_WEDNESDAY:3,D_THURSDAY:4,D_FRIDAY:5,D_SATURDAY:6,REC_LEN:8,T_OFFSET:8,T_CN:0,T_TIME:5,BC_CN:3,BC_TIME:8}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.timeoutRejectPromise=n.timeoutResolvePromise=n.processSiProto=n.CRC16=n.prettyHex=n.arr2cardNumber=n.arr2date=n.arr2time=n.arr2big=n.isByte=void 0;var r=t(0),o=n.isByte=function(e){return Number(e)===e&&Math.floor(e)===e&&e<256},i=n.arr2big=function(e){for(var n=0,t=0;t<e.length;t++){var r=e[t];if(!o(r))throw new Error("Array elements need to be bytes");n+=r*Math.pow(256,e.length-t-1)}return n},a=(n.arr2time=function(e){if(2!==e.length)throw new Error("arr2time: length must be 2, but is "+e.length);return 238===e[0]&&238===e[1]?null:i(e)},n.arr2date=function(e){if(7===e.length||6===e.length){var n=i(e.slice(4,6));return new Date(Date.UTC(e[0]+2e3,e[1]-1,e[2],12*(1&e[3])+Math.floor(n/3600),Math.floor(n%3600/60),n%60,7===e.length?1e3*e[6]/256:0))}if(3===e.length)return new Date(Date.UTC(2e3+e[0],e[1]-1,e[2]));throw new Error("arr2date: length must be 3, 6 or 7, but is "+e.length)},n.arr2cardNumber=function(e){if(4===e.length||3===e.length){var n=e[1]<<8|e[0],t=4===e.length&&0!==e[3];return!t&&1<e[2]&&e[2]<=4?n+=1e5*e[2]:(t||4<e[2])&&(n+=e[2]<<16),4===e.length&&(n|=e[3]<<24),n}throw new Error("arr2cardNumber: length must be 3 or 4, but is "+e.length)},n.prettyHex=function(e){if("string"==typeof e){var n=[],t=void 0;for(t=0;t<e.length;t++)n.push(("00"+e.charCodeAt(t).toString(16)).slice(-2));return n.join(" ").toUpperCase()}return Array.from(e).map(function(e){return"00"+e.toString(16)}).map(function(e){return e.slice(-2)}).join(" ").toUpperCase()}),s=n.CRC16=function(e){if(e.length<3)return[1<=e.length?e[0]:0,2<=e.length?e[1]:0];for(var n=e.length%2==0?e.concat([0,0]):e.concat([0]),t=256*n[0]+n[1],r=2;r<n.length;r+=2){for(var o=n.slice(r,r+2),i=256*o[0]+o[1],a=0;a<16;a++)0!=(32768&t)?(t<<=1,0!=(32768&i)&&(t+=1),t^=32773):(t<<=1,0!=(32768&i)&&(t+=1)),i<<=1;t&=65535}return[t>>8,255&t]};n.processSiProto=function(e){for(var n=void 0,t=void 0;void 0===n;){if(0===e.length)return null;if(e[0]!==r.proto.ACK){if(e[0]===r.proto.NAK)return e.splice(0,1),{mode:r.proto.NAK,command:null,parameters:[]};if(e[0]!==r.proto.WAKEUP)if(e[0]===r.proto.STX){if(e.length<6)return null;n=e[1];var o=e[2];if(e.length<6+o)return null;if(e[5+o]===r.proto.ETX){t=e.slice(3,3+o);var i=s(e.slice(1,3+o)),c=e.slice(3+o,5+o);e.splice(0,6+o),c[0]===i[0]&&c[1]===i[1]||console.debug("Invalid Command received.\n    CMD:0x"+a([n])+"\n    LEN:"+o+"\n    PARAMS:"+a(t)+"\n    CRC:"+a(c)+"\n    Content-CRC:"+a(i))}else console.warn("Invalid end byte: "+a([e[5+o]])),e.splice(0,1)}else console.warn("Invalid start byte: "+a([e[0]])),e.splice(0,1);else e.splice(0,1)}else e.splice(0,1)}return{mode:r.proto.STX,command:n,parameters:t}},n.timeoutResolvePromise=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(t,r){return setTimeout(function(){return t(e)},n)})},n.timeoutRejectPromise=function(e,n){return new Promise(function(t,r){return setTimeout(function(){return t(e)},n)})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SiStation=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(1),i=t(0);var a=n.SiStation=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainStation=n,this._info={},this._infoTime=0,this._infoSubscribers=[]}return r(e,[{key:"readInfo",value:function(n){var t=this,r=(new Date).getTime();return!n&&r<this._infoTime+6e4?(0,o.timeoutResolvePromise)(this._info):!n&&0<this._infoSubscribers.length?new Promise(function(e,n){t._infoSubscribers.push({resolve:e,reject:n})}):this.mainStation._sendCommand(i.proto.cmd.GET_SYS_VAL,[0,128],1).then(function(n){var r=n[0];return r.splice(0,3),t._infoTime=(new Date).getTime(),t._info={},t._info._raw=r,t._info.serialNumber=(0,o.arr2big)(r.slice(0,4)),t._info.firmwareVersion=(0,o.arr2big)(r.slice(5,8)),t._info.buildDate=(0,o.arr2date)(r.slice(8,11)),t._info.deviceModel=e.modelLookup()[(0,o.arr2big)(r.slice(11,13))],t._info.memorySize=(0,o.arr2big)(r.slice(13,14)),t._info.refreshRate=r[16],t._info.powerMode=r[17],t._info.batteryDate=(0,o.arr2date)(r.slice(21,24)),t._info.batteryCapacity=(0,o.arr2big)(r.slice(25,27)),t._info.backupPointer=(0,o.arr2big)(r.slice(28,30).concat(r.slice(33,35))),t._info.siCard6Mode=(0,o.arr2big)(r.slice(51,52)),t._info.memoryOverflow=(0,o.arr2big)(r.slice(61,62)),t._info.interval=(0,o.arr2big)(r.slice(72,74)),t._info.wtf=(0,o.arr2big)(r.slice(74,76)),t._info.program=r[112],t._info.mode=e.modeLookup()[r[113]],t._info.code=r[114]+((192&r[115])<<2),t._info.beeps=r[115]>>2&1,t._info.flashes=1&r[115],t._info.extendedProtocol=1&r[116],t._info.autoSend=r[116]>>1&1,t._info.handshake=r[116]>>2&1,t._info.sprint4ms=r[116]>>3&1,t._info.passwordOnly=r[116]>>4&1,t._info.stopOnFullBackup=r[116]>>5&1,t._info.autoReadout=r[116]>>7&1,t._info.lastWriteDate=(0,o.arr2date)(r.slice(117,123)),t._info.autoOffTimeout=(0,o.arr2big)(r.slice(126,128)),t._infoSubscribers.map(function(e){return setTimeout(function(){return e.resolve(t._info)},1)}),t._infoSubscribers=[],console.log("INFO READ",t._info),t._info}).catch(function(e){throw t._infoSubscribers.map(function(e){return setTimeout(function(){return e.reject()},1)}),t._infoSubscribers=[],new Error("READ INFO")})}},{key:"time",value:function(e){if(void 0===e)return this.mainStation._sendCommand(i.proto.cmd.GET_TIME,[],1).then(function(e){return(0,o.arr2date)(e[0].slice(2))});var n=e.getHours()%12*3600+60*e.getMinutes()+e.getSeconds(),t=[e.getFullYear()%100,e.getMonth()+1,e.getDate(),(e.getDay()<<1)+Math.floor(e.getHours()/12),n>>8,255&n,Math.floor(256*e.getMilliseconds()/1e3)];return this.mainStation._sendCommand(i.proto.cmd.SET_TIME,t,1).then(function(e){return(0,o.arr2date)(e[0].slice(2))})}},{key:"signal",value:function(e){var n=!e||e<1?1:e;return this.mainStation._sendCommand(i.proto.cmd.SIGNAL,[n],1).then(function(e){if(e[0][2]!==n)throw new Error("NUM BEEPS")})}},{key:"powerOff",value:function(){return this.mainStation._sendCommand(i.proto.cmd.OFF,[],0)}},{key:"info",value:function(e,n,t){var r=this;if(void 0===t)return this.readInfo(!1).then(function(n){return n[e]});var o=void 0;return this.readInfo(!1).then(function(e){if(!(o=n(e)))throw new Error("INVALID_PARAM");return r.mainStation._sendCommand(i.proto.cmd.SET_SYS_VAL,o,1)}).then(function(e){var n=e[0];if(n.splice(0,2),n[0]!==o[0])throw new Error("SET_CODE_RESP_ERR");return r.readInfo(!0)}).then(function(n){return n[e]})}},{key:"code",value:function(e){return this.info("code",function(n){return[114,255&e,((768&e)>>2)+(63&n._raw[115])]},e)}},{key:"mode",value:function(n){return this.info("mode",function(t){var r=e.modeLookup(),o=n.hasOwnProperty("val")?n.val:n;return void 0!==r[o]&&[113,o]},n)}},{key:"beeps",value:function(e){return this.info("beeps",function(n){return[115,(e?4:0)+(251&n._raw[115])]},e)}},{key:"flashes",value:function(e){return this.info("flashes",function(n){return[115,(e?1:0)+(254&n._raw[115])]},e)}},{key:"autoSend",value:function(e){return this.info("autoSend",function(n){return[116,(e?2:0)+(253&n._raw[116])]},e)}},{key:"extendedProtocol",value:function(e){return this.info("extendedProtocol",function(n){return[116,(e?1:0)+(254&n._raw[116])]},e)}},{key:"serialNumber",value:function(){return this.info("serialNumber",function(){return!1},void 0)}},{key:"firmwareVersion",value:function(){return this.info("firmwareVersion",function(){return!1},void 0)}},{key:"buildDate",value:function(){return this.info("buildDate",function(){return!1},void 0)}},{key:"deviceModel",value:function(){return this.info("deviceModel",function(){return!1},void 0)}},{key:"memorySize",value:function(){return this.info("memorySize",function(){return!1},void 0)}},{key:"batteryDate",value:function(){return this.info("batteryDate",function(){return!1},void 0)}},{key:"batteryCapacity",value:function(){return this.info("batteryCapacity",function(){return!1},void 0)}},{key:"backupPointer",value:function(){return this.info("backupPointer",function(){return!1},void 0)}},{key:"siCard6Mode",value:function(){return this.info("siCard6Mode",function(){return!1},void 0)}},{key:"memoryOverflow",value:function(){return this.info("memoryOverflow",function(){return!1},void 0)}},{key:"lastWriteDate",value:function(){return this.info("lastWriteDate",function(){return!1},void 0)}},{key:"autoOffTimeout",value:function(){return this.info("autoOffTimeout",function(){return!1},void 0)}}],[{key:"modeLookup",value:function(){return e._modeLookup?e._modeLookup:(e._modeLookup={},Object.keys(e.Mode).map(function(n){e._modeLookup[e.Mode[n].val]=n}),e._modeLookup)}},{key:"typeLookup",value:function(){return e._typeLookup?e._typeLookup:(e._typeLookup={},Object.keys(e.Type).map(function(n){e._typeLookup[e.Type[n].val]=n}),e._typeLookup)}},{key:"modelLookup",value:function(){return e._modelLookup?e._modelLookup:(e._modelLookup={},Object.keys(e.Model).map(function(n){e.Model[n].vals.map(function(t){e._modelLookup[t]=n})}),e._modelLookup)}}]),e}();a.Mode={SIACSpecialFunction1:{val:1},Control:{val:2},Start:{val:3},Finish:{val:4},Readout:{val:5},Clear:{val:7},Check:{val:10},Print:{val:11},StartWithTimeTrigger:{val:12},FinishWithTimeTrigger:{val:13},BCControl:{val:18},BCStart:{val:19},BCFinish:{val:20},BCSlave:{val:31}},a.Type={Main:{val:0},Sprint:{val:1},Print:{val:2},Field:{val:3},Master:{val:4}},a.Model={BSF3:{vals:[32771],description:"BSF3",type:a.Type.Field,series:3},BSF4:{vals:[32772],description:"BSF4",type:a.Type.Field,series:4},BSF5:{vals:[33045],description:"BSF5",type:a.Type.Field,series:5},BSF6:{vals:[33094],description:"BSF6",type:a.Type.Field,series:6},BSF7:{vals:[33047,33175],description:"BSF7",type:a.Type.Field,series:7},BSF8:{vals:[33048,33176],description:"BSF8",type:a.Type.Field,series:8},BS7Master:{vals:[33159],description:"BS7-Master",type:a.Type.Master,series:7},BS8Master:{vals:[33160],description:"BS8-Master",type:a.Type.Master,series:8},BSM4:{vals:[32900],description:"BSM4",type:a.Type.Main,series:4},BSM6:{vals:[32902],description:"BSM6",type:a.Type.Main,series:6},BSM7:{vals:[37271],description:"BSM7",type:a.Type.Main,series:7},BSM8:{vals:[37272],description:"BSM8",type:a.Type.Main,series:8},BS7S:{vals:[38295],description:"BS7-S",type:a.Type.Sprint,series:7},BS7P:{vals:[45463],description:"BS7-P",type:a.Type.Print,series:7},BS7GSM:{vals:[47255],description:"BS7-GSM",type:a.Type.Field,series:7},BS8P:{vals:[45464],description:"BS8-P",type:a.Type.Print,series:8}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SiCard=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(1),i=t(0);var a=n.SiCard=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainStation=n,this.cardNumber=t,this.clearTime=-1,this.checkTime=-1,this.startTime=-1,this.finishTime=-1,this.punches=[]}return r(e,[{key:"read",value:function(){var n=e.typeByCardNumber(this.cardNumber);return e.Type[n].read(this)}},{key:"type",value:function(){return e.typeByCardNumber(this.cardNumber)}},{key:"toDict",value:function(){return{cardNumber:this.cardNumber,clearTime:this.clearTime,checkTime:this.checkTime,startTime:this.startTime,finishTime:this.finishTime,punches:this.punches}}},{key:"toString",value:function(){return this.type()+" Number: "+this.cardNumber+"\nClear: "+this.clearTime+"\nCheck: "+this.checkTime+"\nStart: "+this.startTime+"\nFinish: "+this.finishTime+"\n"+this.punches.map(function(e){return e.code+": "+e.time}).join("\n")+"\n"}},{key:"toHtml",value:function(){return this.toString().replace(/\n/g,"<br />")}}]),e}();a.Type={SICard5:{vals:[1e3,5e5],description:"SI Card 5",read:function(e){return e.mainStation._sendCommand(i.proto.cmd.GET_SI5,[],1).then(function(n){var t=n[0];t.splice(0,2);var r=(0,o.arr2big)([t[6],t[4],t[5]]);499999<r&&console.warn("SICard5 Error: SI Card Number inconsistency: SI5 detected, but number is "+r+" (not in 0 - 500'000)"),r=t[6]<2?(0,o.arr2big)([t[4],t[5]]):1e5*t[6]+(0,o.arr2big)([t[4],t[5]]),e.cardNumber!==r&&console.warn("SICard5 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(t.slice(19,21)),e.finishTime=(0,o.arr2time)(t.slice(21,23)),e.checkTime=(0,o.arr2time)(t.slice(25,27));var a=Math.min(Math.max(t[23]-1,0),30);e.punches=new Array(a);for(var s=32,c=0;c<a;c++){s%16==0&&s++;var u=(0,o.arr2time)(t.slice(s+1,s+3));0<=u?e.punches[c]={code:t[s+0],time:u}:console.warn("SICard5 Error: Undefined Time in punched range"),s+=3}return e.mainStation._sendCommand(i.proto.ACK,[],0),e})}},SICard6:{vals:[5e5,1e6,2003e3,2004e3],description:"SI Card 6",read:function(e){return e.mainStation._sendCommand(i.proto.cmd.GET_SI6,[8],3).then(function(n){0!==n[0][2]&&console.warn("SICard6 Error: First read block is "+n[0][2]+" (expected 0)"),6!==n[1][2]&&console.warn("SICard6 Error: Second read block is "+n[1][2]+" (expected 6)"),7!==n[2][2]&&console.warn("SICard6 Error: Third read block is "+n[2][2]+" (expected 7)"),n[0].splice(0,3),n[1].splice(0,3),n[2].splice(0,3);var t=(0,o.arr2big)([n[0][11],n[0][12],n[0][13]]);e.cardNumber!==t&&console.warn("SICard6 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(n[0].slice(26,28)),e.finishTime=(0,o.arr2time)(n[0].slice(22,24)),e.checkTime=(0,o.arr2time)(n[0].slice(30,32)),e.clearTime=(0,o.arr2time)(n[0].slice(34,36));var r=Math.min(Math.max(n[0][18]-1,0),64);e.punches=new Array(r);for(var a=1,s=0,c=0;c<r;c++){128<=s&&(a++,s=0);var u=(0,o.arr2time)(n[a].slice(s+2,s+4));0<=u?e.punches[c]={code:n[a][s+1],time:u}:console.warn("SICard6 Error: Undefined Time in punched range"),s+=4}return e.mainStation._sendCommand(i.proto.ACK,[],0),e})}},SICard8:{vals:[2e6,2003e3,2004e3,3e6],description:"SI Card 8",read:function(e){var n=void 0;return e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[0],1).then(function(t){console.assert(0===t[0][2],"Inconsistent");var r=t[0].slice(3),a=(0,o.arr2big)([r[25],r[26],r[27]]);return e.cardNumber!==a&&console.warn("SICard8 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(r.slice(14,16)),e.finishTime=(0,o.arr2time)(r.slice(18,20)),e.checkTime=(0,o.arr2time)(r.slice(10,12)),n=Math.min(Math.max(r[22],0),128),e.punches=new Array(n),e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[1],1)}).then(function(t){console.assert(1===t[0][2],"Inconsistent");for(var r=t[0].slice(3),a=0;a<30&&!(a>=n);a++){var s=(0,o.arr2time)(r.slice(4*a+10,4*a+12));0<=s?e.punches[a]={code:r[4*a+9],time:s}:console.warn("SICard8 Error: Undefined Time in punched range")}return e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e})})}},SICard9:{vals:[1e6,2e6],description:"SI Card 9",read:function(e){var n=void 0;return e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[0],1).then(function(t){console.assert(0===t[0][2],"Inconsistent");var r=t[0].slice(3),a=(0,o.arr2big)([r[25],r[26],r[27]]);e.cardNumber!==a&&console.warn("SICard9 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(r.slice(14,16)),e.finishTime=(0,o.arr2time)(r.slice(18,20)),e.checkTime=(0,o.arr2time)(r.slice(10,12)),n=Math.min(Math.max(r[22],0),128),e.punches=new Array(n);for(var s=!1,c=0;c<18;c++){if(c>=n){s=!0;break}var u=(0,o.arr2time)(r.slice(4*c+58,4*c+60));0<=u?e.punches[c]={code:r[4*c+57],time:u}:console.warn("SICard9 Error: Undefined Time in punched range")}return s?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[1],1).then(function(t){console.assert(1===t[0][2],"Inconsistent");for(var r=t[0].slice(3),a=18;a<50&&!(a>=n);a++){var s=(0,o.arr2time)(r.slice(4*a-70,4*a-68));0<=s?e.punches[a]={code:r[4*a-71],time:s}:console.warn("SICard9 Error: Undefined Time in punched range")}return e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e})})})}},SICard10:{vals:[7e6,8e6],description:"SI Card 10",read:function(e){var n=function(e,n,t,r){for(var i=!1,a=0;a<32;a++){if(32*t+a>=r){i=!0;break}var s=(0,o.arr2time)(e.slice(4*a+2,4*a+4));0<=s?n[32*t+a]={code:e[4*a+1],time:s}:console.warn("SICard10 Error: Undefined Time in punched range")}return i},t=void 0;return e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[0],1).then(function(n){console.assert(0===n[0][2],"Inconsistent");var r=n[0].slice(3),a=(0,o.arr2big)([r[25],r[26],r[27]]);return e.cardNumber!==a&&console.warn("SICard10 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(r.slice(14,16)),e.finishTime=(0,o.arr2time)(r.slice(18,20)),e.checkTime=(0,o.arr2time)(r.slice(10,12)),t=Math.min(Math.max(r[22],0),128),e.punches=new Array(t),e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[4],1)}).then(function(r){console.assert(4===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,0,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[5],1).then(function(r){console.assert(5===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,1,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[6],1).then(function(r){console.assert(6===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,2,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[7],1).then(function(r){console.assert(7===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,3,t),e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e})})})})})}},SICard11:{vals:[9e6,1e7],description:"SI Card 11",read:function(e){var n=function(e,n,t,r){for(var i=!1,a=0;a<32;a++){if(32*t+a>=r){i=!0;break}var s=(0,o.arr2time)(e.slice(4*a+2,4*a+4));0<=s?n[32*t+a]={code:e[4*a+1],time:s}:console.warn("SICard11 Error: Undefined Time in punched range")}return i},t=void 0;return e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[0],1).then(function(n){console.assert(0===n[0][2],"Inconsistent");var r=n[0].slice(3),a=(0,o.arr2big)([r[25],r[26],r[27]]);return e.cardNumber!==a&&console.warn("SICard11 Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(r.slice(14,16)),e.finishTime=(0,o.arr2time)(r.slice(18,20)),e.checkTime=(0,o.arr2time)(r.slice(10,12)),t=Math.min(Math.max(r[22],0),128),e.punches=new Array(t),e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[4],1)}).then(function(r){console.assert(4===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,0,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[5],1).then(function(r){console.assert(5===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,1,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[6],1).then(function(r){console.assert(6===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,2,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[7],1).then(function(r){console.assert(7===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,3,t),e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e})})})})})}},SIAC:{vals:[8e6,9e6],description:"SIAC",read:function(e){var n=function(e,n,t,r){for(var i=!1,a=0;a<32;a++){if(32*t+a>=r){i=!0;break}var s=(0,o.arr2time)(e.slice(4*a+2,4*a+4));0<=s?n[32*t+a]={code:e[4*a+1],time:s}:console.warn("SIAC Error: Undefined Time in punched range")}return i},t=void 0;return e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[0],1).then(function(n){console.assert(0===n[0][2],"Inconsistent");var r=n[0].slice(3),a=(0,o.arr2big)([r[25],r[26],r[27]]);return e.cardNumber!==a&&console.warn("SIAC Error: SI Card Number inconsistency"),e.startTime=(0,o.arr2time)(r.slice(14,16)),e.finishTime=(0,o.arr2time)(r.slice(18,20)),e.checkTime=(0,o.arr2time)(r.slice(10,12)),t=Math.min(Math.max(r[22],0),128),e.punches=new Array(t),e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[4],1)}).then(function(r){console.assert(4===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,0,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[5],1).then(function(r){console.assert(5===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,1,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[6],1).then(function(r){console.assert(6===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,2,t)?e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e}):e.mainStation._sendCommand(i.proto.cmd.GET_SI8,[7],1).then(function(r){console.assert(7===r[0][2],"Inconsistent");var o=r[0].slice(3);return n(o,e.punches,3,t),e.mainStation._sendCommand(i.proto.ACK,[],0).then(function(){return e})})})})})}},PCard:{vals:[4e6,5e6],description:"pCard",read:function(e){}},TCard:{vals:[6e6,7e6],description:"tCard",read:function(e){}},FCard:{vals:[14e6,15e6],description:"fCard",read:function(e){}}},a.typeByCardNumber=function(e){a._typeLookup||(a._typeLookup={borderList:[],borderLookup:{}},Object.keys(a.Type).map(function(e){var n=a.Type[e].vals;if(n.length%2!=0)throw new Error("SiCard.Type."+e+": vals length is "+n.length+"?!? (must be even)");for(var t=0,r=0;r<n.length;r++){var o=a._typeLookup.borderList,i=void 0;for(i=0;i<o.length&&o[i]<n[r];i++);var s=a._typeLookup.borderList[i]===n[r];if(s||a._typeLookup.borderList.splice(i,0,n[r]),r%2==0){var c=void 0;if(s&&(c=a._typeLookup.borderLookup[n[r]]))throw new Error("SiCard.Type."+e+": "+n[r]+" would collide with "+c);if(!s&&0<i&&(c=a._typeLookup.borderLookup[a._typeLookup.borderList[i-1]]))throw new Error("SiCard.Type."+e+": "+n[r]+" would collide with "+c);a._typeLookup.borderLookup[n[r]]=e,t=n[r]}else{if(t!==a._typeLookup.borderList[i-1])throw new Error("SiCard.Type."+e+": "+n[r]+" is not an immediate follow-up of "+t);a._typeLookup.borderLookup[n[r]]||(a._typeLookup.borderLookup[n[r]]=!1)}}}));var n=void 0;for(n=0;n<a._typeLookup.borderList.length&&a._typeLookup.borderList[n]<=e;n++);return 0!==n&&a._typeLookup.borderLookup[a._typeLookup.borderList[n-1]]}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.BaseDriver=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"new",value:function(e){throw new Error('Driver must implement "new" method')}},{key:"detect",value:function(e){throw new Error('Driver must implement "detect" method')}},{key:"open",value:function(e){throw new Error('Driver must implement "open" method')}},{key:"close",value:function(e){throw new Error('Driver must implement "close" method')}},{key:"send",value:function(e,n){throw new Error('Driver must implement "send" method')}},{key:"name",get:function(){throw new Error("Driver must implement name getter")}}]),e}()},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebUsb=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(4);var i=[{vendorId:4292,productId:32778}],a=n.WebUsb=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.BaseDriver),r(n,[{key:"new",value:function(e){var n=this;"usb"in navigator&&navigator.usb.requestDevice({filters:i}).then(function(t){"USB-"+t.serialNumber in e.allByDevice||new e({ident:"USB-"+t.serialNumber,name:t.productName,driver:n,_device:t})})}},{key:"detect",value:function(e){var n=this;"usb"in navigator&&navigator.usb.getDevices().then(function(t){t.map(function(t){-1!==i.findIndex(function(e){return t.vendorId===e.vendorId&&t.productId===e.productId})&&("USB-"+t.serialNumber in e.allByDevice||new e({ident:"USB-"+t.serialNumber,name:t.productName,driver:n,_device:t}))})})}},{key:"open",value:function(e){return new Promise(function(n,t){var r=e.device._device;e.device._receiveLoop=function(){r.transferIn(1,64).then(function(n){e.device._receiveLoop();var t=new Uint8Array(n.data.buffer);e._logReceive(t);for(var r=0;r<t.length;r++)e._respBuffer.push(t[r]);e._processReceiveBuffer()}).catch(function(n){console.warn(n),e._remove()})},console.debug("Opening...",e.device),r.open().then(function(){return console.debug("Resetting...",r),r.reset()}).then(function(){return console.debug("Selecting Configuration...",r),r.selectConfiguration(1)}).then(function(){return console.debug("Claiming Interface...",r),r.claimInterface(0)}).then(function(){return console.debug("Selection Alternate Interface...",r),r.selectAlternateInterface(0,0)}).then(function(){return console.debug("Enabling Serial..."),r.controlTransferOut({requestType:"vendor",recipient:"interface",request:0,value:1,index:0})}).then(function(){return console.debug("Setting Baudrate..."),r.controlTransferOut({requestType:"vendor",recipient:"interface",request:30,value:0,index:0},new Uint8Array([0,150,0,0]).buffer)}).then(function(){console.debug("Starting Receive Loop..."),e.device._receiveLoop(),n()})})}},{key:"close",value:function(e){return new Promise(function(n,t){var r=e.device._device;console.debug("Disabling Serial..."),r.controlTransferOut({requestType:"vendor",recipient:"interface",request:0,value:0,index:0}).then(function(){return console.debug("Releasing Interface..."),r.releaseInterface(0)}).then(function(){return console.debug("Closing Device..."),r.close()}).then(function(){n()})})}},{key:"send",value:function(e,n){return e.device._device.transferOut(1,n)}},{key:"name",get:function(){return"WebUSB"}}]),n}();n.default=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(5);Object.defineProperty(n,"WebUsb",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SiMainStation=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(1),i=t(0),a=t(3),s=t(2),c=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(t(6));function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(n,t,r,i,a,s){var c=this;u(this,e),this.command=n,this.parameters=t,this.numResponses=r,this.resolve=i,this.reject=a,this.timeout=s,this.state=e.State.QUEUED,this.timeoutTimer=setTimeout(function(){c.state===e.State.SENT&&(console.debug("Timeout: cmd "+(0,o.prettyHex)([c.command])+" (expected "+c.numResponses+" responses)",c.responses),c.fail())},1e3*s),this.responses=[]}return r(e,[{key:"addResponse",value:function(e){this.responses.push(e),this.responses.length===this.numResponses&&this.succeed()}},{key:"succeed",value:function(){this.state=e.State.SUCCEEDED,clearTimeout(this.timeoutTimer),this.resolve(this)}},{key:"fail",value:function(){this.state=e.State.FAILED,clearTimeout(this.timeoutTimer),this.reject(this)}}]),e}();d.State={QUEUED:0,SENT:1,SUCCEEDED:2,FAILED:3};var l=n.SiMainStation=function(e){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.State.Closed;u(this,n);var r=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,null));if(r.mainStation=r,r.device=e,r.card=!1,r.onRemoved=!1,r.onStateChanged=!1,r.onCardInserted=!1,r.onCard=!1,r.onCardRemoved=!1,r._sendQueue=[],r._respBuffer=[],r._deviceOpenTimer=!1,r._deviceOpenNumErrors=0,r.state=t,!n.allByDevice[e.ident]){n.allByDevice[e.ident]=r;try{n.onAdded(r)}catch(e){}}return r.state===n.State.Closed&&r._deviceOpen(),r}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,s.SiStation),r(n,[{key:"resetCardCallbacks",value:function(){this.onCardInserted=!1,this.onCard=!1,this.onCardRemoved=!1}},{key:"_dispatch",value:function(e,n){e&&setTimeout(function(){return e.apply(void 0,function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n))},1)}},{key:"_changeState",value:function(e){this.state=e,this.onStateChanged&&this.onStateChanged(this.state)}},{key:"_deviceOpen",value:function(){var e=this;this._changeState(n.State.Opening),this.device.driver.open(this).then(function(){e._changeState(n.State.Starting),e._deviceOpenNumErrors=0,e._sendCommand(i.proto.cmd.GET_MS,[0],1,5).then(function(){e._changeState(n.State.Ready)}).catch(function(t){e._changeState(n.State.Closed),console.error("Could not communicate after having opened SiMainStation: ",t),e._retryDeviceOpen()})}).catch(function(n){console.error("Could not open SiMainStation: ",n),e._retryDeviceOpen()})}},{key:"_retryDeviceOpen",value:function(){var e=this,n=function(){if(!e._deviceOpenTimer){for(var n=100,t=0;t<e._deviceOpenNumErrors&&t<10;t++)n*=2;e._deviceOpenTimer=setTimeout(function(){e._deviceOpenTimer=!1,e._deviceOpen()},n),e._deviceOpenNumErrors++}};this.device.driver.close(this).then(function(){n()}).catch(function(e){console.error("Could not close device: ",e),n()})}},{key:"_logReceive",value:function(e){console.debug("<= "+(0,o.prettyHex)(e)+"     ("+this.device.driver.name+"; "+this._respBuffer.length+")")}},{key:"_processReceiveBuffer",value:function(){var e=this,n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return setTimeout(function(){return e._processReceiveBuffer()},n)},t=(0,o.processSiProto)(this._respBuffer);if(null===t)return null;var r=t.mode,s=t.command,c=t.parameters;if(r===i.proto.NAK)return 0<this._sendQueue.length&&this._sendQueue[0].state===d.State.SENT&&this._sendQueue[0].fail(),n();var u=void 0,l=void 0;if(s===i.proto.cmd.SI5_DET)return u=(0,o.arr2cardNumber)([c[5],c[4],c[3]]),this.card=new a.SiCard(this,u),console.log("SI5 DET",this.card,c),this._dispatch(this.onCardInserted,[this.card]),this.card.read().then(function(n){e._dispatch(e.onCard,[n])}),n();if(s===i.proto.cmd.SI6_DET)return u=(0,o.arr2cardNumber)([c[5],c[4],c[3]]),"SICard6"!==(l=a.SiCard.typeByCardNumber(u))&&console.warn("SICard6 Error: SI Card Number inconsistency: Function SI6 called, but number is "+u+" (=> "+l+")"),this.card=new a.SiCard(this,u),console.log("SI6 DET",c),this._dispatch(this.onCardInserted,[this.card]),this.card.read().then(function(n){e._dispatch(e.onCard,[n])}),n();if(s===i.proto.cmd.SI8_DET)return u=(0,o.arr2cardNumber)([c[5],c[4],c[3]]),{SICard8:1,SICard9:1,SICard10:1,SICard11:1}[l=a.SiCard.typeByCardNumber(u)]||console.warn("SICard8 Error: SI Card Number inconsistency: Function SI8 called, but number is "+u+" (=> "+l+")"),this.card=new a.SiCard(this,u),console.log("SI8 DET",c),this._dispatch(this.onCardInserted,[this.card]),this.card.read().then(function(n){e._dispatch(e.onCard,[n])}),n();if(s===i.proto.cmd.SI_REM)return u=(0,o.arr2cardNumber)([c[5],c[4],c[3]]),console.log("SI REM",c,u,this.card),!1!==this.card&&this.card.cardNumber===u?this._dispatch(this.onCardRemoved,[this.card]):console.warn("Card "+u+" was removed, but never inserted"),this.card=!1,this._sendQueue.length>0&&this._sendQueue[0].state===d.State.SENT&&176<=this._sendQueue[0].command&&this._sendQueue[0].command<=239&&(console.debug("Early Timeout: cmd "+(0,o.prettyHex)([this._sendQueue[0].command])+" (expected "+this._sendQueue[0].numResponses+" responses)",this._sendQueue[0].responses),this._sendQueue[0].fail()),n();if(s===i.proto.cmd.TRANS_REC){(u=(0,o.arr2big)([c[3],c[4],c[5]]))<5e5&&(u=c[3]<2?(0,o.arr2big)([c[4],c[5]]):1e5*c[3]+(0,o.arr2big)([c[4],c[5]]));var f=new a.SiCard(this,u);return console.log("TRANS_REC",f,c),this._dispatch(this.onCardInserted,[f]),this._dispatch(this.onCardRemoved,[f]),n()}return 0===this._sendQueue.length||this._sendQueue[0].state!==d.State.SENT?(console.warn("Strange Response: "+(0,o.prettyHex)([s])+" (not expecting anything)..."),n()):this._sendQueue[0].command!==s?(console.warn("Strange Response: expected "+(0,o.prettyHex)([this._sendQueue[0].command])+", but got "+(0,o.prettyHex)([s])+"..."),n()):(this._sendQueue[0].addResponse(c),n())}},{key:"_processSendQueue",value:function(){var e=this;if(this.state!==n.State.Starting&&this.state!==n.State.Ready)return setTimeout(function(){return e._processSendQueue()},100);if(0===this._sendQueue.length||this._sendQueue[0].state===d.State.SENT)return null;var t=this._sendQueue[0],r=[t.command,t.parameters.length].concat(t.parameters),a=(0,o.CRC16)(r),s=String.fromCharCode(i.proto.STX),c=void 0;for(c=0;c<r.length;c++)s+=String.fromCharCode(r[c]);for(c=0;c<a.length;c++)s+=String.fromCharCode(a[c]);s+=String.fromCharCode(i.proto.ETX);var u=String.fromCharCode(i.proto.WAKEUP)+s,l=new Uint8Array(u.length);for(c=0;c<u.length;c++)l[c]=u.charCodeAt(c);return this.device.driver.send(this,l.buffer).then(function(){console.debug("=> "+(0,o.prettyHex)(u)+"     ("+e.device.driver.name+")"),t.numResponses<=0&&t.succeed()}).catch(function(e){console.warn(e),t.fail()}),t.state=d.State.SENT,null}},{key:"_sendCommand",value:function(e,n,t,r){var o=this;return new Promise(function(i,a){var s=new d(e,n,t||0,function(e){if(e!==o._sendQueue.shift())throw new Error("Resolved unexecuting SendTask");setTimeout(function(){return o._processSendQueue()},1),i(e.responses)},function(e){if(e!==o._sendQueue.shift())throw new Error("Rejected unexecuting SendTask");setTimeout(function(){return o._processSendQueue()},1),a(new Error("Rejection"))},r||10);o._sendQueue.push(s),o._processSendQueue()})}},{key:"_remove",value:function(){0<this._sendQueue.length&&-1!==this._sendQueue[0].state&&clearTimeout(this._sendQueue[0].timeoutTimer),clearTimeout(this._deviceOpenTimer),delete n.allByDevice[this.device.ident];try{n.onRemoved(this)}catch(e){}try{this.onRemoved()}catch(e){}}}]),n}();l.State={Closed:0,Opening:1,Starting:2,Ready:3},l.allByDevice={},l.all=function(){var e=[];return Object.keys(l.allByDevice).map(function(n){e.push(l.allByDevice[n])}),e},l.startDeviceDetection=function(){!function e(){Object.keys(c).map(function(e){try{var n=new c[e];n&&n.name&&n.detect&&n.send&&n.open&&n.close?n.detect(l):console.warn("Not a driver:",e)}catch(e){console.warn("Error in device detection:",e)}}),l.detectionTimeout&&clearTimeout(l.detectionTimeout),l.detectionTimeout=setTimeout(e,1e3)}()},l.newDevice=function(){Object.keys(c).map(function(e){try{var n=new c[e];n&&n.name&&n.detect&&n.send&&n.open&&n.close?n.new(l):console.warn("Not a driver:",e)}catch(e){console.warn("Error in device detection:",e)}})},l.onAdded=function(e){},l.onRemoved=function(e){}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.si=void 0;var r=c(t(0)),o=c(t(1)),i=t(3),a=t(2),s=t(7);function c(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}var u=n.si={constants:r,utils:o,Station:a.SiStation,MainStation:s.SiMainStation,Card:i.SiCard,onLoad:function(){}};window.addEventListener("load",function(){s.SiMainStation.startDeviceDetection(),u.onLoad&&u.onLoad()},!0),n.default=u,window.si=u}]);
//# sourceMappingURL=si.min.js.map